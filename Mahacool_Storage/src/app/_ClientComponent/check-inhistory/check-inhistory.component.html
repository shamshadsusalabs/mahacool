<div class="p-4">
  <!-- Action Buttons and Search Bar -->
  <div class="flex justify-between items-center mb-4">

    <!-- Search Bar -->
    <div class=" w-1/3">
      <input
        type="text"
        placeholder="Search by CityNamw and warehouse Name"
        class="w-full px-4 py-2 rounded-md shadow-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-600"
        [(ngModel)]="searchTerm"
        (input)="onSearch()">

    </div>
  </div>

  <!-- Data Table -->
  <div *ngIf="paginatedItems.length > 0" class="mt-20">
    <table class="min-w-full bg-white border border-gray-300">
      <thead class="bg-blue-600 text-white">
        <tr>
          <th class="py-2 px-4 border-b">Customer ID</th>
          <th class="py-2 px-4 border-b">Date</th>
          <th class="py-2 px-4 border-b">City Name</th>
          <th class="py-2 px-4 border-b">Warehouse Name</th>
          <th class="py-2 px-4 border-b">Rack Name</th>
          <th class="py-2 px-4 border-b">Type of Sack</th>
          <th class="py-2 px-4 border-b">Dry Fruit Name</th>
          <th class="py-2 px-4 border-b">Weight</th>

        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let item of paginatedItems">
          <ng-container *ngFor="let checkIn of item.checkInHistory">
            <tr class="bg-gray-50">
              <td class="py-2 px-4 border-b">
                <div>{{ item.customerId }}</div>
              </td>
              <td class="py-2 px-4 border-b">
                <div *ngIf="checkIn.
                dateCheckIN
                ">{{ checkIn.
                  dateCheckIN
                   | date:'short' }}</div>
              </td>
              <td class="py-2 px-4 border-b ">
                <div *ngFor="let dryFruit of checkIn.dryFruits">
                  {{ dryFruit.cityName }}
                </div>
              </td>
              <td class="py-2 px-4 border-b">
                <div *ngFor="let dryFruit of checkIn.dryFruits">
                  {{ dryFruit.warehouseName }}
                </div>
              </td>
              <td class="py-2 px-4 border-b">
                <div *ngFor="let dryFruit of checkIn.dryFruits">
                  {{ dryFruit.rackName }}
                </div>
              </td>
              <td class="py-2 px-4 border-b">
                <div *ngFor="let dryFruit of checkIn.dryFruits">
                  {{ dryFruit.name }}
                </div>
              </td>
              <td class="py-2 px-4 border-b">
                <div *ngFor="let dryFruit of checkIn.dryFruits">
                  {{ dryFruit.typeOfSack }}
                </div>
              </td>
              <!-- Action Column -->
              <td class="py-2 px-4 border-b">
                <div *ngFor="let dryFruit of checkIn.dryFruits">
                  {{ dryFruit.weight }}
                </div>
              </td>

            </tr>
          </ng-container>
        </ng-container>
      </tbody>
    </table>
  </div>
  <div *ngIf="paginatedItems.length === 0" class="text-center py-4">No data available</div>

  <!-- Pagination Controls -->
  <div class="flex justify-between items-center mt-4">
    <div>
      <label for="itemsPerPage" class="mr-2">Items per page:</label>
      <select id="itemsPerPage" [(ngModel)]="itemsPerPage" (change)="onPageChange(1)">
        <option *ngFor="let size of [5, 10, 20]" [value]="size">{{ size }}</option>
      </select>
    </div>
    <div class="flex space-x-2">
      <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l" (click)="onPageChange(1)" [disabled]="currentPage === 1">
        First
      </button>
      <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">
        Previous
      </button>
      <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4" (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages">
        Next
      </button>
      <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-r" (click)="onPageChange(totalPages)" [disabled]="currentPage === totalPages">
        Last
      </button>
    </div>
  </div>
</div>
